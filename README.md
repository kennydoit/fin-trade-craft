# fin-trade-craft
#### Monorepository to house ETL of stock market data, perform feature engineering, modeling, forecasting, and portfolio optimization.

#### Remote repository: https://github.com/kennydoit/fin-trade-craft.git
<br>

# Environment
- Environment and libraries are all to be managed using UV. 
- Libraries can be added via ```uv pip install``` or ```pip install``` as long as they are also added to pyproject.toml
<br><br>

# Copilot References
- Prompts for Copilot to use for script builds stored in *prompts/*
- All code generated by Copilot to test or scripts to be stored in *copilot_test_scripts/*
- Copilot to minimize the number of diagnostic scripts by submitting quoted code directly to the terminal
<br><br>
  
# Partners
- Database is PostgreSQL 
- Stock API is Alpha Vantage: alphavantage.co
---
<div style="background:white; display:inline-block; padding:5px;">
  <img src="assets\images\pgsql.png" alt="Logo" height="75">
</div>
<div style="background:white; display:inline-block; padding:5px;">
  <img src="assets\images\av2.png" alt="Logo" height="75">
</div>

<br>

# Directory Structure

```graphql
fin-trade-craft/
├── README.md                       # Guide on how repository works and how Copilot works with codebase
├── pyproject.toml                  # Dependencies 
│
├── archive/                        # This folder may contain outdated instances of scripts and program files. 
│
├── config/                         # Not in use
│
├── copilot_test_scripts/           # Folder for copilot to store all testing scripts
│
├── db/                             # Database-related logic and assets
│   └── schema/                     # DDL scripts, SQL schema definitions
│
├── data_pipeline/                  # Data ingestion and transformation
│   ├── extract/                    # Strictly for Extracting and Loading raw data from AV API
│   │
│   └── transform/
│   
├── features/                       # Feature engineering
│
├── models/                         # Machine learning models
|
├── backtesting/
│ 
├── prompts/                        # Folder containing markdown files with instructions for Copilot
│
├── tests/                          # Unit tests
│  
└── utils/                          # Shared helper functions
```
<br>


# Usage

## Database Monitoring

Monitor database health and statistics with the comprehensive database monitor utility:

```bash
# Quick status overview
python utils/database_monitor.py --quick

# Data freshness report  
python utils/database_monitor.py --freshness

# Detailed analysis for specific table
python utils/database_monitor.py --table commodities

# Full comprehensive report (default)
python utils/database_monitor.py --full
```

The database monitor provides:
- Row counts for all tables
- Data freshness analysis with color-coded status
- Storage usage statistics
- API response status breakdowns
- Null value analysis for key columns
- Last update timestamps

## ETL Data Extraction

Run individual extractors to collect data from Alpha Vantage:

```bash
# Extract commodity data (oil, gas, metals, agriculture)
python data_pipeline/extract/extract_commodities.py

# Extract company overview data
python data_pipeline/extract/extract_overview.py

# Extract financial statements
python data_pipeline/extract/extract_balance_sheet.py
python data_pipeline/extract/extract_cash_flow.py
python data_pipeline/extract/extract_income_statement.py

# Extract stock price data
python data_pipeline/extract/extract_time_series_daily_adjusted.py
```

All extractors use PostgreSQL for data storage and include built-in rate limiting, duplicate prevention, and error handling.

